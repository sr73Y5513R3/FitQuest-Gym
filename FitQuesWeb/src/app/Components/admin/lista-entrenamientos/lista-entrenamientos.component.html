<div class="main-container">
  <app-menu-lateral></app-menu-lateral>

  <main class="content-area">
    <app-top-menu></app-top-menu>

    <div class="search-and-filters">
      <button (click)="changeEstado()">Crear</button>
    </div>

<div class="entrenamientos-page-container" *ngIf="create">
    <form>
        <div class="form-group">
          <label for="nombre" class="form-label-custom">Program Title</label>
          <input type="text" id="nombre" name="nombre" [(ngModel)]="nombre" class="form-control-custom"
                 required #nombreRef="ngModel"
                 [class.is-invalid]="nombreRef.invalid && (nombreRef.dirty || nombreRef.touched)">
          <div *ngIf="nombreRef.invalid && (nombreRef.dirty || nombreRef.touched)" class="invalid-feedback">
            <div *ngIf="nombreRef.errors?.['required']">El título del programa es requerido.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="descripcion" class="form-label-custom">Descripción</label>
          <textarea id="descripcion" name="descripcion" [(ngModel)]="descripcion" class="form-control-custom textarea-custom" rows="4"
                    required #descripcionRef="ngModel"
                    [class.is-invalid]="descripcionRef.invalid && (descripcionRef.dirty || descripcionRef.touched)"></textarea>
          <div *ngIf="descripcionRef.invalid && (descripcionRef.dirty || descripcionRef.touched)" class="invalid-feedback">
            <div *ngIf="descripcionRef.errors?.['required']">La descripción es requerida.</div>
          </div>
        </div>


        <div class="form-group">
          <label for="puntos" class="form-label-custom">Points Awarded</label>
          <input type="number" id="puntos" name="puntos" [(ngModel)]="puntos" class="form-control-custom"
                 required min="0" #puntosRef="ngModel"
                 [class.is-invalid]="puntosRef.invalid && (puntosRef.dirty || puntosRef.touched)">
          <div *ngIf="puntosRef.invalid && (puntosRef.dirty || puntosRef.touched)" class="invalid-feedback">
            <div *ngIf="puntosRef.errors?.['required']">Los puntos son requeridos.</div>
            <div *ngIf="puntosRef.errors?.['min']">Los puntos deben ser un número positivo.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="calorias" class="form-label-custom">Estimated Calorie Burn</label>
          <input type="number" id="calorias" name="calorias" [(ngModel)]="calorias" class="form-control-custom"
                 required min="0" #caloriasRef="ngModel"
                 [class.is-invalid]="caloriasRef.invalid && (caloriasRef.dirty || caloriasRef.touched)">
          <div *ngIf="caloriasRef.invalid && (caloriasRef.dirty || caloriasRef.touched)" class="invalid-feedback">
            <div *ngIf="caloriasRef.errors?.['required']">Las calorías estimadas son requeridas.</div>
            <div *ngIf="caloriasRef.errors?.['min']">Las calorías deben ser un número positivo.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="entrenadorId" class="form-label-custom">Entrenador:</label>
          <select id="entrenadorId" name="entrenadorId" [(ngModel)]="entrenadorId" class="form-control-custom"
                  required #entrenadorIdRef="ngModel"
                  [class.is-invalid]="entrenadorIdRef.invalid && (entrenadorIdRef.dirty || entrenadorIdRef.touched)">
            <option [ngValue]="''" disabled>Selecciona un entrenador</option>
            <option *ngFor="let entrenador of entrenadores" [ngValue]="entrenador.id">
              {{ entrenador.Username }}
            </option>
          </select>
          <div *ngIf="entrenadorIdRef.invalid && (entrenadorIdRef.dirty || entrenadorIdRef.touched)" class="invalid-feedback">
            <div *ngIf="entrenadorIdRef.errors?.['required']">El entrenador es requerido.</div>
          </div>
          <div *ngIf="entrenadores.length === 0 && !errorMessage" class="text-muted mt-2">
            Cargando entrenadores...
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary-custom" (click)="goBack()">Volver</button>
          <button type="submit" class="btn-primary-custom" (click)="createEntrenamiento()">
            <i class="bi bi-plus-circle"></i> Crear Entrenamiento
          </button>
        </div>
      </form>

</div>

<div class="entrenamientos-page-container" *ngIf="!create">
  
    <div class="entrenamientos-grid">
      <ng-container *ngIf="entrenamientosPage?.content && entrenamientosPage!.content.length > 0">
    <div class="entrenamiento-card"
         *ngFor="let entreno of entrenamientosPage!.content"> <div class="card-body">
        <h5 class="card-title">{{ entreno.nombre }}</h5>
        <p class="card-text">{{ entreno.descripcion }}</p>
        <p class="card-level">Duración: {{ entreno.duracion }} minutos</p>
        <p class="card-level">Valoración: {{ entreno.valoracionMedia }}</p>
      </div>
    </div>
  </ng-container>
      <ng-template #noEntrenamientos>
        <div *ngIf="entrenamientosPage?.empty" class="alert alert-info mt-3">
          No se encontraron entrenamientos.
        </div>
      </ng-template>
    </div>
  
    <nav aria-label="Page navigation" *ngIf="entrenamientosPage && entrenamientosPage.totalPages > 1">
      <ul class="pagination justify-content-center mt-4">
        <li class="page-item">
          <a class="page-link" (click)="previousPage()">Anterior</a>
        </li>
        <li class="page-item" *ngFor="let pageNum of [].constructor(entrenamientosPage.totalPages); let i = index"
            [class.active]="i === currentPage">
          <a class="page-link" (click)="goToPage(i)">{{ i + 1 }}</a>
        </li>
        <li class="page-item">
          <a class="page-link" (click)="nextPage()">Siguiente</a>
        </li>
      </ul>
    </nav>
  
  </div>

  </main>
</div>
    <!--
    <div class="form-card" *ngIf="create">
      <h2 class="form-title">Crear entrenamiento</h2>

      <div *ngIf="successMessage" class="alert alert-success custom-alert" role="alert">
        {{ successMessage }}
        <button type="button" class="btn-close" (click)="successMessage = null"></button>
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger custom-alert" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = null"></button>
      </div>

      -->
 
